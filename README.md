<h1 align="center">H·ªÜ TH·ªêNG KH·∫¢O S√ÅT TR·ª∞C TUY·∫æN<br/>TR∆Ø·ªúNG ƒê·∫†I H·ªåC SAO ƒê·ªé</h1>

<p align="center">
    <em>ƒê·ªì √°n t·ªët nghi·ªáp - X√¢y d·ª±ng h·ªá th·ªëng kh·∫£o s√°t tr·ª±c tuy·∫øn s·ª≠ d·ª•ng Laravel Framework.</em>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Laravel-FF2D20?style=for-the-badge&logo=laravel&logoColor=white" alt="Laravel">
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white" alt="MySQL">
  <img src="https://img.shields.io/badge/PHP-777BB4?style=for-the-badge&logo=php&logoColor=white" alt="PHP">
  <img src="https://img.shields.io/badge/Bootstrap-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white" alt="Bootstrap">
</p>

---

## üöÄ T√≠nh nƒÉng n·ªïi b·∫≠t

-   **Qu·∫£n l√Ω Kh·∫£o s√°t ƒê·ªông:** D·ªÖ d√†ng t·∫°o, s·ª≠a, x√≥a, v√† sao ch√©p c√°c m·∫´u kh·∫£o s√°t.
-   **Qu·∫£n l√Ω ƒê·ª£t kh·∫£o s√°t:** L√™n l·ªãch v√† qu·∫£n l√Ω c√°c ƒë·ª£t kh·∫£o s√°t theo th·ªùi gian.
-   ~~**X√°c th·ª±c ng∆∞·ªùi tham gia:** H·ªó tr·ª£ import danh s√°ch (Excel) ƒë·ªÉ gi·ªõi h·∫°n ng∆∞·ªùi ƒë∆∞·ª£c ph√©p l√†m kh·∫£o s√°t.~~
-   **B√°o c√°o & Th·ªëng k√™:** Giao di·ªán b√°o c√°o tr·ª±c quan v·ªõi bi·ªÉu ƒë·ªì, b·∫£ng bi·ªÉu v√† ch·ª©c nƒÉng xu·∫•t file Excel/PDF.
-   **Ph√¢n t√≠ch n√¢ng cao:** H·ªó tr·ª£ ph√¢n t√≠ch ch√©o (cross-tabulation) ƒë·ªÉ t√¨m ra m·ªëi li√™n h·ªá gi·ªØa c√°c c√¢u tr·∫£ l·ªùi.
-   **B·∫£o m·∫≠t:** T√≠ch h·ª£p Google reCAPTCHA v2 ƒë·ªÉ ch·ªëng spam v√† bot.
-   **Ghi log ho·∫°t ƒë·ªông:** Theo d√µi m·ªçi thay ƒë·ªïi quan tr·ªçng trong h·ªá th·ªëng.

---

## üõ†Ô∏è H∆∞·ªõng d·∫´n C√†i ƒë·∫∑t & Tri·ªÉn khai

B·∫°n c√≥ th·ªÉ c√†i ƒë·∫∑t h·ªá th·ªëng theo **2 c√°ch**:

-   **C√°ch truy·ªÅn th·ªëng (th·ªß c√¥ng) v·ªõi PHP/Composer**
-   **C√°ch s·ª≠ d·ª•ng Docker (khuy√™n d√πng cho m√¥i tr∆∞·ªùng production ho·∫∑c mu·ªën setup nhanh)**

---

### üö© **A. C√†i ƒë·∫∑t truy·ªÅn th·ªëng (PHP/Composer)**

#### 1. Y√™u c·∫ßu h·ªá th·ªëng

-   **Git**
-   **Web Server:** Apache/Nginx (XAMPP, Laragon, WAMP ƒë∆∞·ª£c h·ªó tr·ª£)
-   **PHP:** `8.1` tr·ªü l√™n
-   **Composer:** `2.x` tr·ªü l√™n
-   **Database:** MySQL ho·∫∑c MariaDB

#### 2. C·∫•u h√¨nh m√¥i tr∆∞·ªùng PHP

Tr∆∞·ªõc khi c√†i ƒë·∫∑t, b·∫°n c·∫ßn ƒë·∫£m b·∫£o m√¥i tr∆∞·ªùng PHP ƒë√£ ƒë∆∞·ª£c c·∫•u h√¨nh ƒë√∫ng.

1.  **T√¨m file `php.ini`:**
    M·ªü Terminal (ho·∫∑c Command Prompt) v√† ch·∫°y l·ªánh:

    ```sh
    php --ini
    ```

    L·ªánh n√†y s·∫Ω hi·ªÉn th·ªã ƒë∆∞·ªùng d·∫´n ƒë·∫øn file `php.ini` ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng (v√≠ d·ª•: `C:\xampp\php\php.ini`).

2.  **K√≠ch ho·∫°t c√°c extension c·∫ßn thi·∫øt:**
    M·ªü file `php.ini` v√† t√¨m c√°c d√≤ng sau, sau ƒë√≥ **x√≥a d·∫•u ch·∫•m ph·∫©y (`;`)** ·ªü ƒë·∫ßu m·ªói d√≤ng ƒë·ªÉ k√≠ch ho·∫°t ch√∫ng:

    ```ini
    ;extension=curl
    ;extension=fileinfo
    ;extension=gd
    ;extension=intl
    ;extension=mbstring
    ;extension=openssl
    ;extension=pdo_mysql
    ```

    Sau khi s·ª≠a, ch√∫ng s·∫Ω tr·ªü th√†nh:

    ```ini
    extension=curl
    extension=fileinfo
    extension=gd
    extension=intl
    extension=mbstring
    extension=openssl
    extension=pdo_mysql
    ```

3.  **(Quan tr·ªçng) C·∫•u h√¨nh ch·ª©ng ch·ªâ SSL (cacert):**
    ƒê·ªÉ kh·∫Øc ph·ª•c l·ªói `cURL error 60: SSL certificate problem`, b·∫°n c·∫ßn ch·ªâ cho PHP bi·∫øt n∆°i l∆∞u tr·ªØ file ch·ª©ng ch·ªâ g·ªëc.

    -   T·∫£i file `cacert.pem` m·ªõi nh·∫•t t·ª´ trang ch√≠nh th·ª©c c·ªßa cURL: [https://curl.se/docs/caextract.html](https://curl.se/docs/caextract.html)
    -   L∆∞u file n√†y v√†o m·ªôt v·ªã tr√≠ c·ªë ƒë·ªãnh, v√≠ d·ª•: `C:\xampp\php\extras\ssl\cacert.pem` (t·ª± t·∫°o th∆∞ m·ª•c `extras\ssl` n·∫øu ch∆∞a c√≥).
    -   Trong file `php.ini`, t√¨m v√† s·ª≠a 2 d√≤ng sau (b·ªè d·∫•u `;` v√† th√™m ƒë∆∞·ªùng d·∫´n):
        ```ini
        curl.cainfo = "C:\xampp\php\extras\ssl\cacert.pem"
        openssl.cafile= "C:\xampp\php\extras\ssl\cacert.pem"
        ```

4.  **Kh·ªüi ƒë·ªông l·∫°i Web Server:**
    Sau khi l∆∞u file `php.ini`, h√£y **kh·ªüi ƒë·ªông l·∫°i Apache** trong XAMPP/Laragon/WAMP ƒë·ªÉ √°p d·ª•ng c√°c thay ƒë·ªïi.

#### 3. C√†i ƒë·∫∑t Project

1.  **Clone repository:**

    ```sh
    git clone https://github.com/tho493/khao_sat.git he-thong-khao-sat
    cd he-thong-khao-sat
    ```

2.  **C√†i ƒë·∫∑t c√°c th∆∞ vi·ªán (dependencies):**

    ```sh
    composer install
    ```

3.  **T·∫°o file m√¥i tr∆∞·ªùng `.env`:**
    Sao ch√©p file `.env.example` th√†nh `.env`, sau ƒë√≥ t·∫°o kh√≥a ·ª©ng d·ª•ng.

    ```sh
    copy .env.example .env
    php artisan key:generate
    ```

4.  **C·∫•u h√¨nh Database:**
    M·ªü file `.env` v√† ch·ªânh s·ª≠a c√°c th√¥ng tin k·∫øt n·ªëi database cho ph√π h·ª£p:

    ```env
    DB_CONNECTION=mysql
    DB_HOST=127.0.0.1
    DB_PORT=3306
    DB_DATABASE=khao_sat_db
    DB_USERNAME=root
    DB_PASSWORD=
    ```

5.  **Import & Seed Database:**

    -   T·∫°o m·ªôt database r·ªóng v·ªõi t√™n b·∫°n ƒë√£ khai b√°o trong `.env` (v√≠ d·ª•: `khao_sat_db`).
    -   Import file [`khao_sat_db.sql`](./database/khao_sat_db.sql) ƒë∆∞·ª£c cung c·∫•p v√†o database v·ª´a t·∫°o.
    -   Ch·∫°y seeder ƒë·ªÉ t·∫°o t√†i kho·∫£n admin m·∫∑c ƒë·ªãnh (option):
        ```sh
        php artisan db:seed --class=DatabaseSeeder
        ```
        -   T√†i kho·∫£n m·∫∑c ƒë·ªãnh: `tho493` / `tho493`

#### 4. C·∫•u h√¨nh Google reCAPTCHA (B·∫Øt bu·ªôc)

H·ªá th·ªëng s·ª≠ d·ª•ng Google reCAPTCHA v2 ƒë·ªÉ b·∫£o m·∫≠t.

1.  **ƒêƒÉng k√Ω website:**
    -   Truy c·∫≠p [Google reCAPTCHA Admin Console](https://www.google.com/recaptcha/admin).
    -   ƒêƒÉng k√Ω m·ªôt site m·ªõi v·ªõi c√°c th√¥ng tin sau:
        -   **Label:** T√™n d·ª± √°n (VD: H·ªá th·ªëng Kh·∫£o S√°t SDU)
        -   **reCAPTCHA type:** Ch·ªçn **"Challenge (v2)"** -> **"I'm not a robot" Checkbox**.
        -   **Domains:** Th√™m `localhost` v√† `127.0.0.1` (ƒë·ªÉ ph√°t tri·ªÉn) v√† t√™n mi·ªÅn th·∫≠t khi deploy.
2.  **L·∫•y kh√≥a:**
    Sau khi ƒëƒÉng k√Ω, b·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c **Site Key** v√† **Secret Key**.
3.  **C·∫≠p nh·∫≠t file `.env`:**
    M·ªü file `.env` v√† th√™m 2 kh√≥a n√†y v√†o:
    ```env
    RECAPTCHA_SITE_KEY=YOUR_SITE_KEY_HERE
    RECAPTCHA_SECRET_KEY=YOUR_SECRET_KEY_HERE
    ```

#### 5. C·∫•u h√¨nh Google AI (Chatbot)

1.  **ƒêƒÉng k√Ω website:**
    -   Truy c·∫≠p [Google AI Studio](https://aistudio.google.com/apikey).
    -   Nh·∫•n n√∫t `Get API key` v√† l√†m theo h∆∞·ªõng d·∫´n ƒë·ªÉ l·∫•y key api.
2.  **C·∫≠p nh·∫≠t file `.env`:**
    M·ªü file `.env` v√† th√™m kh√≥a n√†y v√†o:
    ```env
    GEMINI_API_KEY="YOUR_GEMINI_API_KEY_HERE"
    ```

#### 6. Kh·ªüi ch·∫°y ·ª©ng d·ª•ng

1.  **D·ªçn d·∫πp cache v√† link storage (quan tr·ªçng):**
    ```sh
    php artisan migrate
    php artisan optimize:clear
    php artisan storage:link
    ```
2.  **Kh·ªüi ch·∫°y server ph√°t tri·ªÉn:**
    ```sh
    php artisan serve
    ```
3.  **Ch·∫°y l·ªánh c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë·ª£t kh·∫£o s√°t:** (Quan tr·ªçng, n√≥ gi√∫p b·∫°n t·ª± ƒë·ªông c·∫≠p nh·∫≠t tr·∫°ng th√°i d·ª±a theo gi·ªù b·∫Øt ƒë·∫ßu c·ªßa kh·∫£o s√°t)
    ```sh
    php artisan schedule:work
    ```
    -   N·∫øu b·∫°n mu·ªën ch·∫°y server tr√™n m√¥i tr∆∞·ªùng production, h√£y thay `serve` b·∫±ng `serve --port=80`.
4.  **Truy c·∫≠p v√†o ƒë·ªãa ch·ªâ ƒë∆∞·ª£c cung c·∫•p (th∆∞·ªùng l√† `http://127.0.0.1:8000`).**

---

### üö© **B. C√†i ƒë·∫∑t b·∫±ng Docker (Nhanh & ƒê∆°n gi·∫£n)**

#### 1. Y√™u c·∫ßu h·ªá th·ªëng

-   **Docker** v√† **Docker Compose** (t·∫£i t·∫°i [https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/))
-   T·ªëi thi·ªÉu 4GB RAM, 10GB dung l∆∞·ª£ng tr·ªëng

#### 2. C√°ch c√†i ƒë·∫∑t

B·∫°n c√≥ th·ªÉ c√†i ƒë·∫∑t theo 2 c√°ch:

-   **C√°ch 1: Build t·ª´ source**

    -   Xem h∆∞·ªõng d·∫´n chi ti·∫øt trong file `DOCKER_README.md` ƒëi k√®m repo ƒë·ªÉ bi·∫øt c√°ch clone, build, c·∫•u h√¨nh m√¥i tr∆∞·ªùng, kh·ªüi t·∫°o database v√† ch·∫°y ·ª©ng d·ª•ng.
    -   M·ªôt s·ªë l·ªánh ph·ªï bi·∫øn:
        -   `docker-compose up -d --build` ‚Äî Kh·ªüi ƒë·ªông v√† build containers
        -   `docker-compose exec app php artisan migrate` ‚Äî Ch·∫°y migrations
        -   `docker-compose logs -f` ‚Äî Xem logs real-time
        -   `docker-compose down` ‚Äî D·ª´ng to√†n b·ªô d·ªãch v·ª•

-   **C√°ch 2: S·ª≠ d·ª•ng image c√≥ s·∫µn**

    -   B·∫°n c√≥ th·ªÉ pull image ƒë√£ build s·∫µn t·ª´ Docker Hub:
        ```sh
        docker pull tho493/khao-sat:latest
        ```
    -   Copy file [`.env.docker.example`](.env.docker.example) th√†nh `.env` v√† ch·ªânh s·ª≠a l·∫°i `GEMINI_API_KEY`, `RECAPTCHA_SITE_KEY`, `RECAPTCHA_SECRET_KEY`, `APP_URL` .

    -   Sau ƒë√≥ kh·ªüi ch·∫°y c√°c image c·∫ßn thi·∫øt:

        ```sh
        docker network create khao_sat_network
        docker volume create db_data
        docker volume create redis_data

        docker run -d --name khao_sat_db --network khao_sat_network \
            -e MYSQL_DATABASE=khao_sat_db \
            -e MYSQL_USER=khao_sat_user \
            -e MYSQL_PASSWORD=khao_sat_password \
            -e MYSQL_ROOT_PASSWORD=root_password \
            -v db_data:/var/lib/mysql \
            -v $(pwd)/database/khao_sat_db.sql:/docker-entrypoint-initdb.d/init.sql \
            mysql:8.0

        docker run -d --name khao_sat_redis --network khao_sat_network \
            -v redis_data:/data \
            -p 6379:6379 \
            redis:alpine

        docker run -d --name khao_sat_app --network khao_sat_network \
            --env-file .env \
            -v $(pwd):/var/www \
            -v $(pwd)/docker/php/local.ini:/usr/local/etc/php/conf.d/local.ini \
            tho493/khao-sat:latest

        docker run -d --name khao_sat_nginx --network khao_sat_network \
            -v $(pwd):/var/www \
            -v $(pwd)/docker/nginx/default.conf:/etc/nginx/conf.d/default.conf \
            -v $(pwd)/docker/nginx/ssl:/etc/nginx/ssl \
            -p 8080:80 \
            --depends-on khao_sat_app \
            nginx:alpine

        docker run -d --name khao_sat_phpmyadmin --network khao_sat_network \
            -e PMA_HOST=db \
            -e PMA_PORT=3306 \
            -e PMA_USER=khao_sat_user \
            -e PMA_PASSWORD=khao_sat_password \
            -p 8081:80 \
            --depends-on khao_sat_db \
            phpmyadmin/phpmyadmin
        ```

    > **L∆∞u √Ω:** B·∫°n c·∫ßn ch·ªânh s·ª≠a file `.env` (ho·∫∑c `env.docker.example`) tr∆∞·ªõc khi ch·∫°y l·∫ßn ƒë·∫ßu ƒë·ªÉ c·∫•u h√¨nh c√°c API key v√† th√¥ng tin k·∫øt n·ªëi database. B·∫°n h√£y ƒë·ªïi port 8080 v√† 8081 sang port kh√°c n·∫øu b·∫°n ƒë√£ c√≥ d·ªãch v·ª• ch·∫°y tr√™n port 8080 ho·∫∑c 8081.

#### 3. Tham kh·∫£o th√™m

-   ƒê·ªÉ bi·∫øt chi ti·∫øt v·ªÅ backup, restore, production, SSL, monitoring... h√£y ƒë·ªçc file [`DOCKER_README.md`](./DOCKER_README.md) trong repo.

> **L∆∞u √Ω:** N·∫øu g·∫∑p l·ªói 500 khi truy c·∫≠p ·ª©ng d·ª•ng, h√£y th·ª≠ kh·ªüi ƒë·ªông l·∫°i MySQL v√† ch·∫°y l·ªánh `php artisan optimize:clear` trong ƒë·ªÉ x√≥a cache Laravel.

## Th√¥ng tin li√™n h·ªá

-   **Sinh vi√™n th·ª±c hi·ªán:** Nguy·ªÖn Ch√≠ Th·ªç
-   **Email:** [chitho040903@gmail.com](mailto:chitho040903@gmail.com)
-   **Facebook:** [@tho493](https://facebook.com/tho493)

---

## Notes

-   **Gi√°o vi√™n h∆∞·ªõng d·∫´n:** ThS. Ph·∫°m VƒÉn Ki√™n
-   Ph·∫ßn m·ªÅm l√† s·∫£n ph·∫©m th·ª≠ nghi·ªám.
